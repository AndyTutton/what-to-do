<% if current_user %>
<div class="container p-5">
  <div class="d-flex align-items-center justify-content-between pb-4 border-bottom border-3 mb-4">
    <div class="d-flex align-items-center">
      <% if current_user.avatar.attached? %>
        <%= cl_image_tag current_user.avatar.key, :transformation=>[
          {:gravity=>"face", :height=>40, :width=>40, :crop=>"thumb"},
          {:radius=>"max"},
          {:fetch_format=>:auto}
        ] %>
      <% else %>
        <%= image_tag('user.png', class: "avatar") %>
      <% end %>
      <h1 class="m-0 ms-3"><%= current_user.first_name %> <%= current_user.last_name %></h1>
    </div>
    <%= link_to "", edit_user_registration_path, class: "fa-regular fa-pen-to-square btn btn-sm" %>
  </div>

    <div class="d-flex flex-column mb-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="m-0">My groups</h2>
      <%= link_to "See all", groups_path, class: "btn btn-sm btn-outline-secondary"  %>
    </div>

    <div class="d-flex overflow-scroll scroll-spotify">
      <%= render 'shared/group_card', groups: @groups %>
    </div>

  </div>



  <div class="d-flex flex-column mb-2">
    <h2 class="m-0 mb-4">Upcoming activities</h2>
    <div class="d-flex gap-3 mb-3" >
    <button>Your confirmed events </button>
    <button>All your groups events </button>
    <button>Your events </button>
    </div>
    <% if @bookings.empty? %>
      <div class="card card-body bg-body-secondary border-2 text-center rounded-3">No upcoming events</div>
    <% else %>
      <%= render 'shared/events', events: @bookings %>
    <% end %>
  </div>

  <div class="d-flex flex-column mb-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="m-0">My saves</h2>
      <%= link_to "See all", saves_path, class: "btn btn-sm btn-outline-secondary"  %>
    </div>
    <%= render 'shared/saves', saves: @saves %>
  </div>
</div>
<% else %>
<%= redirect_to root_path %>
<% end %>
