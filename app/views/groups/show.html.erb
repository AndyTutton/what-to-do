<div class="container p-5">
  <div class="d-flex flex-column pb-4 border-bottom border-4 mb-4">
    <h1><%= @group.name.capitalize %></h1>
    <div class="m-0 mt-3 p-0">
      <% @members.each do |member| %>
        <p class="m-0 p-0"><%= member.first_name %></p>
      <% end %>
    </div>
  </div>
  <div class="d-flex flex-column pb-4 border-bottom border-4 mb-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2 class="m-0">Proposals</h2>
      <%= link_to "See all", proposals_path({group_id: @group.id}), class: "btn btn-sm btn-outline-secondary"  %>
    </div>
    <%= render 'shared/proposals', proposals: @proposals.last(2) %>
  </div>

  <div class="row">
    <div class="col">
        <%= link_to 'Leave Group', group_membership_path(@group, membership: {group: @group, user_id: current_user}),data: {turbo_method: :delete, turbo_confirm: 'Are you sure?'}, class: "btn btn-danger"%>
        <% if current_user.memberships.find_by(group: @group, admin: true) %>
          <%= link_to "Add to Group", new_group_membership_path(@group), class: "btn btn-primary" %>
          <%= link_to "Delete Group", group_path(@group), data: { "turbo-method": :delete }, class: "btn btn-danger text-white"%>
        <% end %>
    </div>
  </div>

  <div class="w-100 input-group my-5" data-controller="clipboard">
    <input class="form-control" data-clipboard-target="input" type="text" value="<%= @invite_link %>" readonly>
    <div class="input-group-append">
      <button id="copy-button" class="btn btn-outline-primary" data-action="click->clipboard#copy">Copy invite link</button>
    </div>
  </div>
  <h2> Group members </h2>
  <% @members.each do |member| %>
    <li> <%= member.email %>
      <% if current_user.memberships.find_by(group: @group, admin: true) %>
        <%= link_to 'X', group_membership_path(@group, membership: {group: @group, user_id: member}),data: {turbo_method: :delete, turbo_confirm: 'Are you sure?'}, class: "btn btn-danger"%>
      <% end %>
    </li>
  <% end%>
<div>
